## Discord Bot設計一覧

### 1. Botの目的

* サーバー管理補助

### 2. 主要機能

* 荒らし対策（高度・段階的処理＋即時処理）
* Welcome/Leaveメッセージ管理
* Web管理画面による設定操作
* メッセージログ・荒らし判定履歴の保存
* ダッシュボードでのログ・統計確認
* 通知機能（管理者DM＋特定チャンネル投稿）

### 3. 荒らし対策

* 判定方法：単純ルールベース

  * 禁止ワード検知（サーバーごとに設定可能）
  * URLリストによるリンク安全性チェック
  * 短時間連続投稿（スパム）検知
* 処理フロー

  * 警告 → 削除 → mute → kick/ban
  * 危険度高の場合は即時処理＋管理者通知
* 設定変更はWeb管理画面から可能、即時DB反映
* AI判定や外部APIは使用せずBot内完結

### 4. Welcome/Leaveメッセージ

* Web管理画面から編集可能
* DBに即時反映
* 埋め込みメッセージやフォーマット対応

### 5. 設定全般

* Web管理画面で操作可能
* 荒らし対策の閾値、警告回数、mute時間、禁止ワードなど即時反映
* 管理者権限を持つユーザーおよびコマンドで追加したユーザーのみ操作可能

### 6. Botの稼働形態

* マルチサーバー対応
* 公開Botとして誰でも招待可能
* ユーザーコマンドはセットアップ系統のみ

### 7. 技術スタック

* 言語：Python
* フレームワーク：discord.py
* データベース：SQL系（PostgreSQL/MySQL）
* Web管理画面：Flask/FastAPI + HTML/CSS/JS
* 拡張性重視（Cogs/モジュール化）

### 8. ログ管理

* メッセージログ・荒らし判定履歴をDBに保存
* 無期限保存だが、法律で定められた保管期間を過ぎたら上書き
* ダッシュボードでテーブル＋グラフ表示

### 9. 通知

* 管理者DMおよび特定チャンネル投稿で通知
* 運用中の異常や重要操作も通知対象

### 10. 運用・監視

* 自動再起動・ヘルスチェック対応
* 障害発生時は管理者に通知
* Web管理画面は外部アクセス可能
* セキュリティ対策：

  * DB接続・SQLインジェクション対策
  * Webログイン認証・セッション管理
  * Botトークンの環境変数管理
  * 権限チェック厳格化
  * 操作ログ保存・監査

### 11. UI/UX

* Web管理画面は操作の簡単さ・直感的UI重視
* ダッシュボードでログ視認性確保（テーブル＋グラフ）
* モバイル対応（レスポンシブデザイン）

### 12. 将来的な拡張性

* モジュール化・Cogs設計
* DB・Web画面・Bot機能ともに拡張可能
* 他サービス連携はなし（Discord専用）

### 13. 運用環境

* 自宅サーバー運用
* 常時稼働・ネットワーク管理は自己責任

---
